# 🚋 제조 현장 이송 장치의 열화 예지보전 관리 대시보드

## 1. 프로젝트 개요

본 프로젝트는 산업 현장과 동일한 환경으로 구성된 Test-bed에서 수집된 이송 장치 센서 데이터를 활용하여, <br>

장비의 상태를 모니터링하고, 탄화 발생을 사전 예측하고 방지하기 위한 **예지보전(Predictive Maintenance) 대시보드**입니다. 

관리자가 데이터를 기반으로 장비 운영의 인사이트를 얻고, 선제적인 유지보수 계획을 수립할 수 있도록 돕는 것을 목표로 합니다.

## 2. 주요 기능

### 2.1. 종합 현황 (Overall Status)
- **실시간 장비 상태 요약:** 전체 장비의 현재 상태(정상, 주의, 경고, 위험)를 KPI 카드와 도넛 차트로 시각화하였습니다.
- **이상 징후 장비 목록:** '경고' 또는 '위험' 상태의 장비를 별도로 강조하여 표시함으로써, 관리자가 즉시 조치해야 할 대상을 명확히 인지할 수 있도록 돕습니다.

### 2.2. 개별 장비 분석 (Individual Equipment Analysis)
- 특정 장비를 선택하여 상세 센서 데이터와 이력을 조회합니다.
- **탭 기반 시각화:** 미세먼지, 온도, 전류, 외부 환경 등 센서 그룹별로 탭을 구성하여, 단위가 다른 센서 데이터를 각각의 스케일에 맞춰 명확하게 시각화합니다.
- **기간 필터링:** 특정 기간의 데이터만 선택하여 장비의 시계열 변화를 심도 있게 분석할 수 있습니다.
- **X축 가독성 개선:** 불연속적인 측정 날짜를 고려하여 X축 레이블을 '월-일 시:분' 형식으로 간결하게 표시하고, 겹치지 않도록 기울기를 적용하여 가독성을 높였습니다.

### 2.3. 데이터 분석 (Data Analysis)
- 선택된 장비의 센서 데이터 간 관계를 분석하여 고장 원인 탐색을 지원합니다.
- **상관관계 히트맵:** 센서 간의 선형 관계를 시각화하여, 양의 상관관계(붉은색), 음의 상관관계(푸른색)를 직관적으로 파악할 수 있습니다.
- **센서별 산점도:** 두 센서 간의 데이터 분포와 이상치를 확인하며, 상관계수를 함께 표시하여 정량적인 관계의 강도를 제공합니다. 점의 색상으로 장비 상태를 구분하여 특정 상태에서의 데이터 패턴을 파악할 수 있습니다.
- **기간 필터링:** 특정 기간의 데이터만 선택하여 분석할 수 있습니다.

### 2.4. 장비 비교 분석 (Equipment Comparison Analysis)
- 여러 장비를 동시에 선택하여 주요 센서 데이터를 비교 분석합니다.
- **다중 장비 선택:** 사용자가 비교하고 싶은 여러 장비를 자유롭게 선택할 수 있습니다.
- **센서 선택:** 비교 기준이 될 특정 센서 값을 선택하여 분석합니다.
- **기간 필터링:** 비교 분석 시에도 특정 기간의 데이터만 선택하여 집중적으로 분석할 수 있습니다.

## 3. 기술 스택

- **대시보드 프레임워크:** Streamlit
- **데이터 처리 및 분석:** Pandas, Numpy
- **시각화:** Plotly Express
- **데이터베이스:** SQLite3 

## 4. 데이터

데이터 출처: [AI Hub - 제조현장 이송장치의 열화 예지보전 멀티모달 데이터](https://www.aihub.or.kr/aihubdata/data/view.do?currMenu=115&topMenu=100&searchKeyword=%EC%A0%9C%EC%A1%B0%ED%98%84%EC%9E%A5%20%EC%9D%B4%EC%86%A1%EC%9E%A5%EC%B9%98%EC%9D%98%20%EC%97%B4%ED%99%94%20%EC%98%88%EC%A7%80%EB%B3%B4%EC%A0%84%20%EB%A9%80%ED%8B%B0%EB%AA%A8%EB%8B%AC%20%EB%8D%B0%EC%9D%B4%ED%84%B0&aihubDataSe=data&dataSetSn=71802)

데이터 1SET = 8유형의 센서값 데이터와 열화상 이미지 1장, 메타데이터로 구성.

데이터는 SQLite 데이터베이스(`db/sensor_data.sqlite`)에 저장되어 있으며, 

`load_normailze_data_to_sqlite.py` 스크립트를 통해 정규화된 형태로 로드됩니다.

`state` 컬럼은 0부터 3까지의 정수(0: 정상, 1: 주의, 2: 경고, 3: 위험)로 장비의 상태를 나타냅니다.

보다 자세한 내용은 출처의 공식 문서, 또는 `notebooks/EDA.ipynb` 파일 참고하면 좋습니다.


## 5. 설치 및 실행

로컬 기준 설치 방법입니다. (추후 Docker Image 업로드 예정)

### 5.1. 환경 설정

1.  **Python 설치:** Python 3.8 이상 버전이 설치되어 있어야 합니다.
2.  **가상 환경 생성 및 활성화 (권장):**
    ```bash
    python -m venv venv
    # Windows
    .\venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```
3.  **의존성 설치:** `requirements.txt`에 명시된 라이브러리를 설치합니다.
    ```bash
    pip install -r requirements.txt
    ```

### 5.2. 데이터 로드

프로젝트 루트 디렉토리에 `data/` 폴더가 있고, 그 안에 `.zip` 형태의 원본 데이터 파일이 있다고 가정합니다.
데이터베이스를 초기화하고 데이터를 로드하려면 다음 스크립트를 실행합니다.
```bash
python load_normailze_data_to_sqlite.py
```
이 스크립트는 `db/sensor_data.sqlite` 파일을 생성하고 데이터를 삽입합니다.

### 5.3. 대시보드 실행

모든 설정이 완료되면, 다음 명령어를 사용하여 Streamlit 대시보드를 실행합니다.
```bash
streamlit run dashboard.py
```
명령어 실행 후 웹 브라우저가 자동으로 열리며 대시보드가 표시됩니다.

## 6. 프로젝트 구조

```
.
├── .gitignore
├── data_access.py             # 데이터베이스 접근 및 데이터 로딩 로직
├── load_normailze_data_to_sqlite.py # 정규화 데이터 로드 
├── load_sensor_data_to_sqlite.py    # 비정규화 데이터 로드 (연습용)
├── README.md                  
├── dashboard.py               # Streamlit 대시보드 초기 진입점
├── requirements.txt           # Python 의존성 목록
├── data/                      # 원본 데이터 파일 (데이터베이스 초기 로드 시 사용)
├── db/                        # SQLite 데이터베이스 파일 (.sqlite)
├── notebooks/                 # 데이터 분석 및 인사이트 제공 (대시보드와 무관, 참고용)
└── pages/                     # Streamlit 멀티페이지 구성
    ├── 1_Overall_Status.py    # 종합 현황 페이지
    ├── 2_Device_Details.py    # 개별 장비 분석 페이지
    ├── 3_Data_Analysis.py     # 데이터 분석 페이지
    └── 4_Compare_Devices.py   # 장비 비교 분석 페이지
```

## 7. 향후 계획 

- **AI 기반 이상치 탐지:** AI 기반 예측 모델을 개발하여 장비 고장 예측 또는 잔여 수명(RUL) 예측 기능을 대시보드에 추가.
- **실시간 데이터 연동:** 현재는 SQLite 기반 정적 데이터베이스를 사용하지만, 새로운 데이터 입력을 고려하여 실시간 모니터링 기능 강화.
- **알림 시스템:** 특정 임계값 초과 또는 고장 예측 시 관리자에게 알림을 보내는 기능 추가.
- **사용자 인증 및 권한 관리:** 대시보드 접근에 대한 보안 강화.
- **UX/UI 개선:** 사용자가 직접 차트 유형이나 필터 옵션을 커스터마이징할 수 있는 기능 추가.
- **Docker 활용 배포:** 편리한 배포를 위해 Dockerfile 작성 및 Docker Hub 배포. 
